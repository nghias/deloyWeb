name: Deploy Frontend to Somee.com via FTP

on:
  push:
    branches:
      - main  # Chạy workflow khi có đẩy mã lên nhánh main
  workflow_dispatch:  # Cho phép bạn chạy thủ công từ tab Actions

permissions:
  contents: read  # Quyền đọc nội dung trong repo
  pages: write  # Quyền ghi lên GitHub Pages (nếu có cần dùng)
  id-token: write  # Quyền sử dụng token

jobs:
  deploy:
    runs-on: ubuntu-latest  # Sử dụng môi trường Ubuntu

    steps:
      # Bước 1: Checkout mã nguồn từ GitHub
      - name: Checkout code
        uses: actions/checkout@v3

      # Bước 2: Debug giá trị FTP server
      - name: Debug FTP Server
        run: |
          echo "FTP Server: $FTP_SERVER"
          echo "FTP Username: $FTP_USERNAME"
          echo "FTP Password: $FTP_PASSWORD"

      # Bước 3: Deploy các tệp lên Somee.com qua FTP sử dụng curl
      - name: Deploy to Somee.com via FTP (using curl)
        run: |
          curl -T ./index.html ftp://$FTP_SERVER/wwwroot/ --user $FTP_USERNAME:$FTP_PASSWORD
        env:
          FTP_SERVER: ${{ secrets.FTP_SERVER }}
          FTP_USERNAME: ${{ secrets.FTP_USERNAME }}
          FTP_PASSWORD: ${{ secrets.FTP_PASSWORD }}
